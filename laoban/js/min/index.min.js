!function(){"use strict";var i=jQuery(".main"),e=i.find(".modal"),n=i.find(".image-1"),t=i.find(".image-2"),a=i.find(".time"),c=i.find(".level1"),d=i.find(".level2"),o=i.find(".progress-middle"),f=[{pic_id:1,pic1:"/images/image1.jpg",pic2:"/images/image2.jpg",pic_data:[{x:46,y:15,width:24,height:24,isCheck:!1},{x:78,y:47,width:32,height:20,isCheck:!1},{x:188,y:77,width:62,height:22,isCheck:!1},{x:199,y:174,width:24,height:17,isCheck:!1},{x:238,y:205,width:25,height:24,isCheck:!1}]},{pic_id:2,pic1:"/images/image1.jpg",pic2:"/images/image2.jpg",pic_data:[{x:46,y:15,width:24,height:24,isCheck:!1},{x:78,y:47,width:32,height:20,isCheck:!1},{x:188,y:77,width:62,height:22,isCheck:!1},{x:199,y:174,width:24,height:17,isCheck:!1},{x:238,y:205,width:25,height:24,isCheck:!1}]}],h=0,s=1,r,l=60,u=!1,g=function(){p(),D()},p=function(){var e=new Date;e.setFullYear(2014,10,11);var n=new Date,t=(Date.parse(e)-Date.parse(n))/1e3,a=Math.floor(t/86400);i.find(".deadline").html(a)},m=function(){e.fadeOut(),i.find(".rule").fadeIn()},k=function(){jQuery(this).closest(".modal").fadeOut()},w=function(){e.fadeOut(),i.find(".sign").fadeIn()},x=function(){e.fadeOut(),i.find(".success").fadeIn()},y=function(){u=!0,C(),v(),i.find(".start").hide(),e.fadeOut()},v=function(){r=window.setInterval(function(){b()},100)},b=function(){0>=l&&_(),l-=.1;var e=Math.floor(l);e>=0&&a.html(10>e?"0"+e:e),o.height(364*l/60),i.find(".progress").height(364*l/60+22)},C=function(){var i=f[s-1];if(!i)return alert("已通关"),window.clearInterval(r),!1;n.css("background-image","url("+i.pic1+")"),t.css("background-image","url("+i.pic2+")").empty();for(var e=0;5>e;e++)t.append('<a data-check="false" class="img-check" style="width:'+i.pic_data[e].width+"px;height:"+i.pic_data[e].height+"px;top:"+i.pic_data[e].y+"px;left:"+i.pic_data[e].x+'px;"></a>')},I=function(){var e=jQuery(this),n=e.attr("data-check");if(u){if("true"===n)return!1;if(e.attr("data-check","true").css("border","2px solid red"),h++,h>=5){if(window.clearInterval(r),3===s)return i.find(".modal2").fadeIn(),!1;j()}}},j=function(){h=0,l=60,s++,r=window.setInterval(function(){b()},100),c.css("background-position","0 -"+56*Math.floor(s/10)+"px"),d.css("background-position","0 -"+s%10*56+"px"),i.find(".prize-tip span").html(s-1),C()},_=function(){return u=!1,n.css("background-image","none"),t.css("background-image","none"),window.clearInterval(r),i.find(".modal1").fadeIn(),!1},O=function(){jQuery(window).scrollTop(921)},Q=function(){e.fadeOut(),j()},D=function(){i.find(".btn1").on("click",m),i.find(".btn2").on("click",w),i.find(".sign-btn").on("click",x),i.find(".start, .success-btn").on("click",y),i.find(".close").on("click",k),i.on("click",".img-check",I),i.find(".modal1 .modal1-prize").on("click",O),i.find(".modal2 .modal2-btn").on("click",Q)};jQuery(g)}();