!function(){var e,n,i=$(".main"),t=$(".question-page"),a=$(".pt-page"),o=!1,s=!1,d=!1,u=0,r=0,c=0,l=0,q=0,g=0,h=1,m,p,f,w=!1,v=/Android/i.test(navigator.userAgent),b=function(){setTimeout(I,300),a.each(function(){var e=$(this);e.data("originalClassList",e.attr("class"))}),i.find(".question1").addClass("pt-page-current"),f=document.createElement("audio"),f.setAttribute("src","bg.mp3"),f.load(),f.loop=!0,f.addEventListener("ended",function(){this.currentTime=0,this.play()},!1),m={appId:"",MsgImg:"http://www.wyyun.com/meiju/images/share.jpg",TLImg:"http://www.wyyun.com/meiju/images/share.jpg",url:"http://www.wyyun.com/meiju/",title:"美剧大战优酷见",desc:"美剧大战优酷见",fakeid:"",callback:function(){}};var e=function(){WeixinJSBridge.on("menu:share:appmessage",function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:m.appId,img_url:m.MsgImg,img_width:"120",img_height:"120",link:m.url,desc:m.desc,title:p},function(e){m.callback()})}),WeixinJSBridge.on("menu:share:timeline",function(e){m.callback(),WeixinJSBridge.invoke("shareTimeline",{img_url:m.TLImg,img_width:"120",img_height:"120",link:m.url,desc:m.desc,title:p},function(e){})}),WeixinJSBridge.on("menu:share:weibo",function(e){WeixinJSBridge.invoke("shareWeibo",{content:m.title,url:m.url},function(e){m.callback()})}),WeixinJSBridge.on("menu:share:facebook",function(e){m.callback(),WeixinJSBridge.invoke("shareFB",{img_url:m.TLImg,img_width:"120",img_height:"120",link:m.url,desc:m.desc,title:m.title},function(e){})}),WeixinJSBridge.call("hideToolbar")};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)),j()},I=function(){v?(e=screen.width/window.devicePixelRatio,n=screen.height/window.devicePixelRatio-65):(e=$(window).width(),n=$(window).height()),i.width(e).height(n)},k=function(){w||(w=!0,f.play())},C=function(){k(),$(this).addClass("pt-page-rotateFall"),t.css("visibility","visible"),S($(".question1 .q").eq(0),"bounceInDown"),S($(".question1 .q").eq(1),"bounceInDown1")},S=function(e,n){e&&e.addClass(n+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass(n),$(this).removeClass("animated")})},x=function(){var e=$(this),n=e.closest(".pt-page"),i=n.next(),a=e.attr("data");e.append("<i></i>"),t.find("."+a).remove(),S($(".question2 .q").eq(0),"rollIn"),S($(".question2 .q").eq(1),"rollIn1"),S($(".question2 .q").eq(2),"rollIn2"),S($(".question2 .q").eq(3),"rollIn3"),A(n,i)},A=function(e,n){var i="pt-page-flipOutTop",t="pt-page-flipInBottom pt-page-delay500";n.addClass("pt-page-current"),e.addClass(i).on("webkitAnimationEnd",function(){e.off("webkitAnimationEnd"),s=!0,d&&B(e,n)}),n.addClass(t).on("webkitAnimationEnd",function(){n.off("webkitAnimationEnd"),d=!0,s&&B(e,n)})},B=function(e,n){s=!1,d=!1,E(e,n),o=!1},E=function(e,n){e.attr("class",e.data("originalClassList")),n.attr("class",n.data("originalClassList")+" pt-page-current")},y=function(){var e=$(this),n=e.attr("data-type"),t=e.closest(".pt-page"),a=t.next();e.append("<i></i>"),L(n),t.hasClass("question2")?(S($(".question3 .q").eq(0),"lightSpeedIn"),S($(".question3 .q").eq(1),"lightSpeedIn1"),S($(".question3 .q").eq(2),"lightSpeedIn2"),S($(".question3 .q").eq(3),"lightSpeedIn3"),S($(".question3 .q").eq(4),"lightSpeedIn4")):t.hasClass("question3")?(S($(".question4 .q").eq(0),"zoomIn"),S($(".question4 .q").eq(1),"zoomIn1"),S($(".question4 .q").eq(2),"zoomIn2"),S($(".question4 .q").eq(3),"zoomIn3"),S($(".question4 .q").eq(4),"zoomIn4")):t.hasClass("question4")?(S($(".question5 .q").eq(0),"rotateIn"),S($(".question5 .q").eq(1),"rotateIn1"),S($(".question5 .q").eq(2),"rotateIn2"),S($(".question5 .q").eq(3),"rotateIn3"),S($(".question5 .q").eq(4),"rotateIn4")):t.hasClass("question5")&&(W(),i.find(".result-page .result div.result-img").addClass("result"+h),i.find(".result-page .share").addClass("share"+h),i.find(".question-page").show().addClass("pt-page-moveToTopEasing"),i.find(".result-page").show().addClass("pt-page-moveFromBottom"),setTimeout(function(){i.find(".question-page").hide()},800),T()),A(t,a)},T=function(){1===h?p="哇！我有喜剧类的DNA，笑傲江湖合不拢腿。你是哪一类？":2===h?p="哇！我有科幻剧的DNA，外星人都是我的小伙伴。你是哪一类？":3===h?p="哇！我有悬疑剧的DNA，头脑是我的一切。你是哪一类？":4===h?p="哇！我有都市剧的DNA，与渣男小三抗争到底。你是哪一类？":5===h&&(p="哇！我有动作剧的DNA，偏好男女混合打。你是哪一类？")},W=function(){J(u,1),J(r,2),J(c,3),J(l,4),J(q,5)},J=function(e,n){e>g&&(g=e,h=n)},L=function(e){switch(e){case"1":u++;break;case"2":r++;break;case"3":c++;break;case"4":l++;break;case"5":q++;break;case"6":u++,q++;break;case"7":u++,r++,l++;break;case"8":u++,r++,q++;break;case"9":r++,q++;break;case"10":c++,q++}},_=function(){i.find(".result").addClass("pt-page-moveToTopEasing"),i.find(".share").show().addClass("pt-page-moveFromBottom")},D=function(){i.find(".share-con").show()},z=function(){i.find(".share-con").hide()},j=function(){i.find(".index-page").on("touchstart",C),t.find(".question1 a").on("touchstart",x),t.find(".question2 a, .question3 a, .question4 a, .question5 a").on("touchstart",y),i.find(".result").on("touchstart, touchmove",_),i.find(".share-title").on("touchstart",D),i.find(".share-con").on("touchstart",z)};$(b)}(void 0);